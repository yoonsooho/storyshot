## StoryShot â€“ ì˜¤ëŠ˜ì˜ í•œ ì¤„ ì¸ìŠ¤íƒ€ ìŠ¤í† ë¦¬ ì¹´ë“œ ìƒì„±ê¸°

StoryShotì€ **ì‚¬ì§„ + í…ìŠ¤íŠ¸ë¡œ ì¸ìŠ¤íƒ€ ìŠ¤í† ë¦¬/ì¹´ì¹´ì˜¤í†¡ í”„ë¡œí•„/ë¸”ë¡œê·¸ ì¸ë„¤ì¼ì— ì“°ê¸° ì¢‹ì€ 9:16 ì¹´ë“œ**ë¥¼ ë§Œë“œëŠ” ê°œì¸ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

-   **Live**: https://storyshot.pages.dev/
-   **Stack**: Next.js (App Router), React, TypeScript, Tailwind CSS v4, next-intl (ko/en)

ì˜ˆì‹œ ì¸ë„¤ì¼(OG ì´ë¯¸ì§€):

![StoryShot OG Image](./public/og-card.png)

---

### ì£¼ìš” ê¸°ëŠ¥

-   **ì˜¤ëŠ˜ì˜ í•œ ì¤„ / ë³´ì¡° ë¬¸ì¥ ì…ë ¥**
    -   ë©”ì¸ ë¬¸ì¥ + ì„œë¸Œ ë¬¸ì¥ì„ ì…ë ¥í•´ì„œ í•œ ì¥ì§œë¦¬ ìŠ¤í† ë¦¬ ì¹´ë“œ ìƒì„±
-   **ê¸°ë¶„ ì„ íƒ**
    -   ğŸ˜Œ ì°¨ë¶„í•¨ / ğŸ˜Š ì¢‹ìŒ / ğŸ˜®â€ğŸ’¨ í”¼ê³¤í•¨ / ğŸ”¥ ì§‘ì¤‘ ë“±ì˜ ê°„ë‹¨í•œ ê¸°ë¶„ í† ê¸€
-   **ë°°ê²½ ì„ íƒ**
    -   ê·¸ë¼ë°ì´ì…˜ í…œí”Œë¦¿ 3ì¢… (ë…¸ì„/ë°”ë‹¤/ëª¨ë…¸í†¤)
    -   ì‚¬ìš©ì ì‚¬ì§„ ì—…ë¡œë“œ í›„, ìœ„ì— í…ìŠ¤íŠ¸ë¥¼ ì–¹ì–´ì„œ ì¹´ë“œ ìƒì„±
-   **9:16 ë¹„ìœ¨ ë¯¸ë¦¬ë³´ê¸°**
    -   ì¸ìŠ¤íƒ€ ìŠ¤í† ë¦¬/ëª¨ë°”ì¼ í™”ë©´ ë¹„ìœ¨ì— ë§ëŠ” ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸°
-   **PNG ë‹¤ìš´ë¡œë“œ**
    -   html-to-image ë¥¼ ì‚¬ìš©í•´ ì¹´ë“œ ì˜ì—­ì„ PNG íŒŒì¼(`story-card.png`)ë¡œ ì €ì¥
    -   ì €ì¥í•œ ì´ë¯¸ì§€ë¥¼ ê·¸ëŒ€ë¡œ ì¸ìŠ¤íƒ€/ì¹´í†¡/ë¸”ë¡œê·¸ ë“±ì— ì—…ë¡œë“œí•´ì„œ ì‚¬ìš© ê°€ëŠ¥
-   **ê°¤ëŸ¬ë¦¬ ê³µìœ  (Supabase)**
    -   Supabase ì„¤ì • ì‹œ, ë§Œë“  ì¹´ë“œë¥¼ ê°¤ëŸ¬ë¦¬ì— ê³µìœ í•˜ê³  ë‹¤ë¥¸ ì‚¬ëŒ ì¹´ë“œë¥¼ ë³¼ ìˆ˜ ìˆìŒ
    -   ë¬´ë£Œ í”Œëœ: Storage 1GB, íŒŒì¼ë‹¹ 50MB ì´í•˜ â†’ PNG ì¹´ë“œ ì—…ë¡œë“œì— ì¶©ë¶„

ë©”ì¸ ì¹´ë“œ ë§Œë“¤ê¸°Â·ë‹¤ìš´ë¡œë“œëŠ” **í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œë§Œ** ë™ì‘í•˜ë©°, ê°¤ëŸ¬ë¦¬ ê¸°ëŠ¥ì„ ì“°ì§€ ì•Šìœ¼ë©´ ì…ë ¥/ì´ë¯¸ì§€ëŠ” ì„œë²„ì— ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

---

### ë‹¤êµ­ì–´ (next-intl)

- **í•œêµ­ì–´(ko) / ì˜ì–´(en)** ì§€ì›. URLì€ `/ko`, `/en` ì´ë©°, ë£¨íŠ¸ `/` ì ‘ì† ì‹œ `/ko` ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë©ë‹ˆë‹¤.
- **LocaleSwitcher** ì»´í¬ë„ŒíŠ¸ë¡œ ê°™ì€ í˜ì´ì§€ì˜ `/ko` â†” `/en` ì „í™˜ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- **êµ¬ì„±**: `middleware`ì—ì„œ locale ë¦¬ë‹¤ì´ë ‰íŠ¸, `src/i18n/request.ts`ì—ì„œ localeë³„ `messages` ë¡œë“œ, `[locale]/layout`ì—ì„œ `NextIntlClientProvider`Â·ë©”íƒ€ë°ì´í„°, í˜ì´ì§€ì—ì„œ `useTranslations('home')`ë¡œ `t()` ì‚¬ìš©. ìƒì„¸ëŠ” `docs/I18N_GUIDE.md`, `docs/I18N_FLOW.md` ì°¸ê³ .

---

### Lighthouse / ì„±ëŠ¥ (FCP ëŒ€ì‘)

- **First Contentful Paint (NO_FCP)** ë¡œ Performance ì ìˆ˜ê°€ ì¸¡ì •ë˜ì§€ ì•Šë˜ ë¬¸ì œë¥¼ ì•„ë˜ì²˜ëŸ¼ ë§ì¶° ë‘ì—ˆìŠµë‹ˆë‹¤.
  - **ì›ì¸**: í˜ì´ì§€/í¼/ì¹´ë“œ ì§„ì… ì• ë‹ˆë©”ì´ì…˜ì´ ëª¨ë‘ `opacity: 0`ìœ¼ë¡œ ì‹œì‘í•´, ê·¸ë™ì•ˆ ë¸Œë¼ìš°ì €ê°€ "ê·¸ë¦° ì½˜í…ì¸ "ê°€ ì—†ë‹¤ê³  íŒë‹¨í•¨.
  - **í•´ê²°**: í‚¤í”„ë ˆì„ê³¼ `.card-preview-initial`ì˜ ì‹œì‘ `opacity`ë¥¼ **0.1**ë¡œ ë³€ê²½í•´, ì²« í”„ë ˆì„ë¶€í„° í”½ì…€ì´ ê·¸ë ¤ì§€ë„ë¡ í•˜ê³  transform ì• ë‹ˆë©”ì´ì…˜ì€ ìœ ì§€. FCPê°€ ì •ìƒ ì¸¡ì •ë˜ë„ë¡ í•¨.

---

### SEO ë° ë©”íƒ€ë°ì´í„° ì„¤ì •

#### 1. ê¸°ë³¸ ë©”íƒ€ë°ì´í„° (`src/app/layout.tsx`)

-   `Metadata`ë¥¼ ì´ìš©í•´ ê¸°ë³¸ SEO ì •ë³´ë¥¼ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.
    -   `title`: `"StoryShot â€“ ì˜¤ëŠ˜ì˜ í•œ ì¤„ ì¸ìŠ¤íƒ€ ìŠ¤í† ë¦¬ ì¹´ë“œ ìƒì„±ê¸°"`
    -   `description`: ì¸ìŠ¤íƒ€ ìŠ¤í† ë¦¬/ì¹´ì¹´ì˜¤í†¡/ë¸”ë¡œê·¸ ì¸ë„¤ì¼ ìš©ë„ ì¤‘ì‹¬ìœ¼ë¡œ ì‘ì„±
    -   `keywords`: `"StoryShot", "ìŠ¤í† ë¦¬ìƒ·", "ì¸ìŠ¤íƒ€ ìŠ¤í† ë¦¬ ì¹´ë“œ", "ì˜¤ëŠ˜ì˜ í•œ ì¤„" ë“±`
    -   `alternates.canonical`: `/`
    -   `robots.index = true`, `robots.follow = true`
-   Open Graph / Twitter ì¹´ë“œ
    -   `og:image`, `twitter:image` ëª¨ë‘ `"/og-card.png"` ë¥¼ ì‚¬ìš©
    -   `public/og-card.png` ë¡œ ì •ì  ì¸ë„¤ì¼ ì´ë¯¸ì§€ë¥¼ ë°°ì¹˜

#### 2. robots ì„¤ì • (`src/app/robots.ts`)

```ts
export default function robots(): MetadataRoute.Robots {
    const baseUrl = process.env.NEXT_PUBLIC_SITE_URL ?? "https://storyshot.pages.dev";

    return {
        rules: {
            userAgent: "*",
            allow: "/",
        },
        sitemap: `${baseUrl}/sitemap.xml`,
    };
}
```

-   ëª¨ë“  í¬ë¡¤ëŸ¬ì— ëŒ€í•´ ì „ì²´ ê²½ë¡œ í¬ë¡¤ë§ í—ˆìš©
-   `Sitemap: https://storyshot.pages.dev/sitemap.xml` ì„ ëª…ì‹œ

#### 3. sitemap ì„¤ì • (`src/app/sitemap.ts`)

```ts
export default function sitemap(): MetadataRoute.Sitemap {
    const baseUrl = process.env.NEXT_PUBLIC_SITE_URL ?? "https://storyshot.pages.dev";

    return [
        {
            url: `${baseUrl}/`,
            lastModified: new Date(),
            changeFrequency: "weekly",
            priority: 1,
        },
    ];
}
```

-   í˜„ì¬ ë‹¨ì¼ í˜ì´ì§€ êµ¬ì¡°ë¼ ë£¨íŠ¸(`/`)ë§Œ í¬í•¨
-   ë°°í¬ í›„ `/sitemap.xml` ê²½ë¡œë¡œ ìë™ ë…¸ì¶œ

#### 4. Google Search Console ì†Œìœ ê¶Œ ì¸ì¦

-   HTML íŒŒì¼ ë°©ì‹ ì¸ì¦ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
-   `public/googleaffbcddc16034708.html`:

```text
google-site-verification: googleaffbcddc16034708.html
```

-   ë°°í¬ í›„ `https://storyshot.pages.dev/googleaffbcddc16034708.html` ì— ì ‘ê·¼ ê°€ëŠ¥  
    â†’ GSCì—ì„œ HTML íŒŒì¼ ë°©ì‹ìœ¼ë¡œ ì†Œìœ ê¶Œ í™•ì¸

---

### Analytics & ê´‘ê³  ìˆ˜ìµí™” ì„¤ì •

#### 1. Google Analytics 4 ì—°ë™

-   GA4 ë°ì´í„° ìŠ¤íŠ¸ë¦¼(ì›¹) ìƒì„± í›„ ë°œê¸‰ë°›ì€ **ì¸¡ì • ID (`G-XXXX...`)** ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
-   `NEXT_PUBLIC_GA_MEASUREMENT_ID` í™˜ê²½ ë³€ìˆ˜ë¥¼ í†µí•´ IDë¥¼ ì£¼ì…í•©ë‹ˆë‹¤.
-   `src/app/layout.tsx`ì—ì„œ `next/script`ë¥¼ ì‚¬ìš©í•´ gtagë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

```ts
const gaId = process.env.NEXT_PUBLIC_GA_MEASUREMENT_ID;

export default function RootLayout({ children }: { children: React.ReactNode }) {
    return (
        <html lang="ko">
            <body>
                {gaId && (
                    <>
                        <Script
                            src={`https://www.googletagmanager.com/gtag/js?id=${gaId}`}
                            strategy="afterInteractive"
                        />
                        <Script id="ga-init" strategy="afterInteractive">
                            {`
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
                gtag('config', '${gaId}');
              `}
                        </Script>
                    </>
                )}
                {children}
            </body>
        </html>
    );
}
```

-   ê¸°ë³¸ **í˜ì´ì§€ë·°/ì„¸ì…˜/ê¸°ë³¸ ì´ë²¤íŠ¸**ë¥¼ ìˆ˜ì§‘í•˜ë©°, í–¥í›„ í•„ìš” ì‹œ `gtag('event', 'download_card', {...})` í˜•íƒœë¡œ ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•´ í–‰ë™ ë‹¨ìœ„ íŠ¸ë˜í‚¹ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

#### 2. Google AdSense ì—°ë™

-   AdSense ì‚¬ì´íŠ¸ ë“±ë¡ ë° `ca-pub-...` í¼ë¸”ë¦¬ì…” IDë¥¼ ì‚¬ìš©í•´ ì „ì—­ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.
-   ì„œëª… ë©”íƒ€ íƒœê·¸:

```ts
export const metadata: Metadata = {
    // ...
    other: {
        "google-adsense-account": "ca-pub-8116400352006173",
    },
};
```

-   ì „ì—­ ìŠ¤í¬ë¦½íŠ¸ëŠ” `next/script`ë¡œ í•œ ë²ˆë§Œ ë¡œë“œí•©ë‹ˆë‹¤.
-   ê´‘ê³  ë°°ë„ˆìš© ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸(`src/components/AdBanner.tsx`)ë¥¼ ë§Œë“¤ì–´ í˜ì´ì§€ ì–´ë””ì—ì„œë‚˜ ê°„ë‹¨íˆ ì‚½ì… ê°€ëŠ¥í•©ë‹ˆë‹¤.

```tsx
export function AdBanner({ adSlot }: { adSlot: string }) {
    useEffect(() => {
        if (!adSlot || adSlot.startsWith("REPLACE_")) return;
        (window.adsbygoogle = window.adsbygoogle || []).push({});
    }, [adSlot]);

    return (
        <div className="min-h-[90px] w-full rounded-xl bg-slate-100/80">
            <ins
                className="adsbygoogle"
                style={{ display: "block" }}
                data-ad-client="ca-pub-8116400352006173"
                data-ad-slot={adSlot}
                data-ad-format="auto"
                data-full-width-responsive="true"
            />
        </div>
    );
}
```

-   ì‹¤ì œ ìš´ì˜ ì‹œì—ëŠ” AdSenseì—ì„œ ë°œê¸‰ëœ **ê´‘ê³  ë‹¨ìœ„ ìŠ¬ë¡¯ ID** ë¥¼ `adSlot`ì— ì „ë‹¬í•˜ì—¬ ë°°ë„ˆë¥¼ ë…¸ì¶œí•©ë‹ˆë‹¤.

---

### ê°¤ëŸ¬ë¦¬ (Supabase) ì„¤ì •

ê°¤ëŸ¬ë¦¬ ê³µìœ  ê¸°ëŠ¥ì„ ì“°ë ¤ë©´ [Supabase](https://supabase.com) ë¬´ë£Œ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ê³  ì•„ë˜ë¥¼ ì§„í–‰í•˜ì„¸ìš”.

1. **í”„ë¡œì íŠ¸ ìƒì„±**  
   ëŒ€ì‹œë³´ë“œì—ì„œ ìƒˆ í”„ë¡œì íŠ¸ ìƒì„± í›„, **Settings â†’ API** ì—ì„œ  
   - **Project URL** â†’ `NEXT_PUBLIC_SUPABASE_URL`  
   - **anon public** í‚¤ â†’ `NEXT_PUBLIC_SUPABASE_ANON_KEY`  
   ë¡œ ë³µì‚¬í•´ `.env.local`ì— ë„£ìŠµë‹ˆë‹¤. (ì°¸ê³ : `.env.example`)

2. **DBÂ·Storage ì„¤ì •**  
   **SQL Editor**ì—ì„œ `docs/supabase-setup.sql` ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.  
   - `shared_cards` í…Œì´ë¸” ìƒì„± ë° RLS  
   - `card-images` ìŠ¤í† ë¦¬ì§€ ë²„í‚· ë° ì •ì±… (ë˜ëŠ” Storage ë©”ë‰´ì—ì„œ ë²„í‚·ì„ ìˆ˜ë™ ìƒì„± í›„ ì •ì±…ë§Œ SQLë¡œ ì¶”ê°€)

3. **ë™ì‘**  
   - í™˜ê²½ ë³€ìˆ˜ê°€ ìˆìœ¼ë©´ ë©”ì¸ í˜ì´ì§€ì— **ê°¤ëŸ¬ë¦¬ì— ê³µìœ ** ë²„íŠ¼ê³¼ **ê°¤ëŸ¬ë¦¬** ë§í¬ê°€ ë³´ì…ë‹ˆë‹¤.  
   - ê³µìœ  ì‹œ ì¹´ë“œ PNGê°€ Storageì— ì˜¬ë¼ê°€ê³  `shared_cards`ì— í•œ ì¤„ì´ ì¶”ê°€ë˜ë©°, `/ko/gallery`(ë˜ëŠ” `/en/gallery`)ì—ì„œ ëª©ë¡ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Supabase ë¬´ë£Œ í”Œëœ: Storage 1GB, íŒŒì¼ë‹¹ 50MB ì´í•˜ì´ë©´ ì´ë¯¸ì§€ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.

---

### ê°¤ëŸ¬ë¦¬ ë¦¬ìŠ¤íŠ¸ ê°€ìƒí™” ë° ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬

ê°¤ëŸ¬ë¦¬(`/ko/gallery`, `/en/gallery`)ëŠ” ì¹´ë“œê°€ ë§ì•„ì ¸ë„ **DOM ê°œìˆ˜ë¥¼ ì¤„ì´ê¸° ìœ„í•´ ê°€ìƒí™”**ë¥¼ ì ìš©í–ˆê³ , **ë¬´í•œ ìŠ¤í¬ë¡¤**ë¡œ ë‹¤ìŒ í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. ìŠ¤í¬ë¡¤ì€ **ë¸Œë¼ìš°ì € ì°½(ë¬¸ì„œ) ê¸°ì¤€**ìœ¼ë¡œë§Œ ë™ì‘í•´, ë‚´ë¶€ì— ë³„ë„ ìŠ¤í¬ë¡¤ ì˜ì—­ì´ ì—†ìŠµë‹ˆë‹¤.

#### 1. @tanstack/react-virtual (`useWindowVirtualizer`)

- **ì—­í• **: ìŠ¤í¬ë¡¤ì€ ë¬¸ì„œ ì „ì²´ë¡œ í•˜ê³ , **ë³´ì´ëŠ” í–‰ë§Œ** DOMì— ê·¸ë ¤ì„œ ì„±ëŠ¥ì„ ìœ ì§€í•©ë‹ˆë‹¤. ìŠ¤í¬ë¡¤ì„ ë‚´ë¦¬ë©´ ìœ„ìª½ í–‰ì€ DOMì—ì„œ ì‚¬ë¼ì§€ê³ , ì•„ë˜ìª½ í–‰ë§Œ ìƒˆë¡œ ê·¸ë ¤ì§‘ë‹ˆë‹¤.
- **ì‚¬ìš© ìœ„ì¹˜**: `src/app/[locale]/gallery/page.tsx`

**ì£¼ìš” ì˜µì…˜**

| ì˜µì…˜ | ì˜ë¯¸ |
|------|------|
| `count` | ê°€ìƒí™”í•  í–‰ ê°œìˆ˜ (`rowCount`) |
| `estimateSize()` | í•œ í–‰ì˜ ì˜ˆìƒ ë†’ì´(px). ì—¬ê¸°ì„œëŠ” 560 |
| `overscan` | ë³´ì´ëŠ” ì˜ì—­ ë°–ì— ëª‡ í–‰ì„ ë” ê·¸ë¦´ì§€ (ê¸°ë³¸ 2). ìŠ¤í¬ë¡¤ ì‹œ ê¹œë¹¡ì„ ê°ì†Œ |
| `scrollMargin` | ë¦¬ìŠ¤íŠ¸ê°€ ë¬¸ì„œ ë§¨ ìœ„ì—ì„œ ì–¼ë§ˆë‚˜ ì•„ë˜ì— ìˆëŠ”ì§€(px). í—¤ë”Â·ì¸íŠ¸ë¡œ ë†’ì´ ë°˜ì˜ |

**ì£¼ìš” ë©”ì„œë“œ**

| ë©”ì„œë“œ | ì˜ë¯¸ |
|--------|------|
| `getTotalSize()` | ì „ì²´ ë¦¬ìŠ¤íŠ¸ ë†’ì´. ì´ ê°’ìœ¼ë¡œ ì»¨í…Œì´ë„ˆ ë†’ì´ë¥¼ ì¡ì•„ í˜ì´ì§€ ì„¸ë¡œ ìŠ¤í¬ë¡¤ì„ ë§Œë“¦ |
| `getVirtualItems()` | **í˜„ì¬ ë·°í¬íŠ¸ì— ë“¤ì–´ì˜¤ëŠ” í–‰ë§Œ** ë‹´ì€ ë°°ì—´. ê° í•­ëª©ì— `key`, `index`, `start`, `size` ë“± í¬í•¨ |

**ì½”ë“œ ì‚¬ìš© ì˜ˆ**

```tsx
const rowVirtualizer = useWindowVirtualizer({
    count: rowCount,
    estimateSize: () => DEFAULT_ROW_HEIGHT, // 560
    overscan: 2,
    scrollMargin: scrollMargin,
});

// ì»¨í…Œì´ë„ˆ ë†’ì´ = ì „ì²´ ë†’ì´ + sentinel ì˜ì—­
<div style={{ height: rowVirtualizer.getTotalSize() + SENTINEL_HEIGHT, position: "relative" }}>
    {rowVirtualizer.getVirtualItems().map((virtualRow) => (
        <div
            key={virtualRow.key}
            style={{
                position: "absolute",
                transform: `translateY(${virtualRow.start - scrollMargin}px)`,
                height: virtualRow.size,
            }}
        >
            <GalleryGridRow index={virtualRow.index} ... />
        </div>
    ))}
</div>
```

- `scrollMargin`ì€ ê°¤ëŸ¬ë¦¬ ì„¹ì…˜ refì˜ `getBoundingClientRect().top + window.scrollY`ë¡œ í•œ ë²ˆ ì¡ê³ , `virtualRow.start - scrollMargin`ìœ¼ë¡œ **ë¬¸ì„œ ì¢Œí‘œ â†’ ì»¨í…Œì´ë„ˆ ê¸°ì¤€ Y**ë¡œ ë³€í™˜í•´ ë°°ì¹˜í•©ë‹ˆë‹¤.

#### 2. react-intersection-observer (`useInView`)

- **ì—­í• **: ë¦¬ìŠ¤íŠ¸ **ë§¨ ì•„ë˜ sentinel** divê°€ í™”ë©´ì— ë“¤ì–´ì˜¤ë©´ `inView`ê°€ trueê°€ ë˜ê³ , ì´ë•Œ ë‹¤ìŒ í˜ì´ì§€ë¥¼ fetchí•´ì„œ **ë¬´í•œ ìŠ¤í¬ë¡¤**ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
- **ì‚¬ìš© ìœ„ì¹˜**: `src/app/[locale]/gallery/page.tsx`

**ì£¼ìš” ì˜µì…˜**

| ì˜µì…˜ | ì˜ë¯¸ |
|------|------|
| `ref` | ê°ì‹œí•  DOMì— ë¶™ì´ëŠ” ref. ì´ ìš”ì†Œê°€ ë³´ì´ë©´ `inView`ê°€ true |
| `inView` | refê°€ ë¶™ì€ ìš”ì†Œê°€ í˜„ì¬ ë³´ì´ëŠ”ì§€ ì—¬ë¶€ (boolean) |
| `rootMargin` | ë·°í¬íŠ¸ í™•ì¥. `"200px 0px"`ë©´ ì•„ë˜ìª½ 200px ì „ì— ë¯¸ë¦¬ íŠ¸ë¦¬ê±° |
| `threshold` | ì–¼ë§ˆë‚˜ ë³´ì—¬ì•¼ â€œë³´ì¸ë‹¤â€ë¡œ í• ì§€. 0ì´ë©´ 1pxë§Œ ë³´ì—¬ë„ true |

**ì½”ë“œ ì‚¬ìš© ì˜ˆ**

```tsx
const { ref: loadMoreRef, inView } = useInView({
    rootMargin: "200px 0px",
    threshold: 0,
});

// ë¦¬ìŠ¤íŠ¸ ë§¨ ì•„ë˜ì— ë³´ì´ì§€ ì•ŠëŠ” sentinel div
<div ref={loadMoreRef} style={{ position: "absolute", top: rowVirtualizer.getTotalSize(), height: SENTINEL_HEIGHT }} />

// inViewê°€ trueì¼ ë•Œ ë‹¤ìŒ í˜ì´ì§€ ë¡œë“œ
useEffect(() => {
    if (!inView || !hasMore || isFetchingMore) return;
    fetchCards(page + 1, true);
}, [inView, hasMore, isFetchingMore, page, fetchCards]);
```

#### 3. ì „ì²´ íë¦„ ìš”ì•½

1. **ë°ì´í„°**: `cards`, `rowCount`, `hasMore`, `page`ë¡œ â€œì§€ê¸ˆê¹Œì§€ ë¶ˆëŸ¬ì˜¨ ì¹´ë“œâ€ì™€ â€œë‹¤ìŒ í˜ì´ì§€ ì¡´ì¬ ì—¬ë¶€â€ ê´€ë¦¬.
2. **ê°€ìƒí™”**: `useWindowVirtualizer`ì— `rowCount`, `estimateSize`, `scrollMargin`ì„ ë„˜ê²¨ì„œ, ë¬¸ì„œ ìŠ¤í¬ë¡¤ì— ë§ì¶° `getVirtualItems()`ë¡œ â€œì§€ê¸ˆ ê·¸ë¦´ í–‰â€ë§Œ ë°›ìŒ.
3. **ë ˆì´ì•„ì›ƒ**: ë†’ì´ `getTotalSize() + SENTINEL_HEIGHT`ì¸ ì»¨í…Œì´ë„ˆë¥¼ ë‘ê³ , ê·¸ ì•ˆì— `getVirtualItems()` ê²°ê³¼ë§Œ `translateY(virtualRow.start - scrollMargin)`ìœ¼ë¡œ ë°°ì¹˜.
4. **ë¬´í•œ ìŠ¤í¬ë¡¤**: ë¦¬ìŠ¤íŠ¸ ë§¨ ì•„ë˜ sentinelì— `useInView`ì˜ refë¥¼ ë‹¬ê³ , `inView`ê°€ trueì¼ ë•Œë§Œ `fetchCards(next, true)` í˜¸ì¶œ.

ì´ë ‡ê²Œ **@tanstack/react-virtual**ë¡œ â€œì–´ë–¤ í–‰ì„ ì–´ë””ì— ê·¸ë¦´ì§€â€ë¥¼ ê²°ì •í•˜ê³ , **react-intersection-observer**ë¡œ â€œì–¸ì œ ë‹¤ìŒ í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ì§€â€ë¥¼ ê²°ì •í•˜ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.

---

### ë¡œì»¬ ê°œë°œ

```bash
pnpm install
pnpm dev
# ë˜ëŠ”
npm install
npm run dev
```

-   ê¸°ë³¸ í¬íŠ¸: `http://localhost:3000`

---

### ì‚¬ìš© íë¦„ (ìš”ì•½)

1. **ì˜¤ëŠ˜ì˜ í•œ ì¤„ / ë³´ì¡° ë¬¸ì¥ ì…ë ¥**
2. ë‚ ì§œ + ì˜¤ëŠ˜ì˜ ê¸°ë¶„ ì„ íƒ
3. ê·¸ë¼ë°ì´ì…˜ ë°°ê²½ ë˜ëŠ” ì‚¬ì§„ ì—…ë¡œë“œ ì„ íƒ
4. ìš°ì¸¡ ë¯¸ë¦¬ë³´ê¸°ì—ì„œ 9:16 ìŠ¤í† ë¦¬ ì¹´ë“œ í™•ì¸
5. `PNGë¡œ ì¹´ë“œ ì €ì¥` ë²„íŠ¼ìœ¼ë¡œ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
6. ì¸ìŠ¤íƒ€ ìŠ¤í† ë¦¬ / ì¹´ì¹´ì˜¤í†¡ í”„ë¡œí•„ / ë¸”ë¡œê·¸ ì¸ë„¤ì¼ ë“±ì— ì—…ë¡œë“œí•´ì„œ ì‚¬ìš©

This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

This project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.

## Learn More

To learn more about Next.js, take a look at the following resources:

-   [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
-   [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.
